<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacman Oyunu</title>
    <link rel="icon" type="image/x-icon" href="img/hacettepe_logo.ico">
    <!-- Bağlantılar -->
    <link rel="stylesheet" href="styles.css">
    <script src="index.js" defer></script>
</head>

<body>
    <!-- Bilgisayardan giriş yapıldığında görüntülenecek sayfa ayrı bir çerçeveye alınıyor -->
    <div id="desktopDeviceModal">
        <!-- Grafik arayüz için kullanılan modal; 'menü' modali -->
        <div class="menu-modal">
            <div class="menu-bg">
                <div>
                    <button onclick="hideMenuModal(), startGame()" id="startBtn">Başla</button>
                </div>
                <div>
                    <button onclick="hideMenuModal(), showHTPModal()" id="howToPlayBtn">Nasıl Oynanır?</button>
                </div>
                <div>
                    <a href="https://github.com/bilalyarmaci/pacman" target="_blank"><button id="aboutBtn">
                            Orijinal Oyun
                        </button></a>
                </div>
            </div>
        </div>

        <!-- Grafik arayüz için kullanılan modal; 'nasıl oynanır' modali -->
        <div class="menu-modal how-to-play-modal">
            <div>
                <a href="https://youtu.be/iffEaM3IMgo" target="_blank"><button>Videoyu İzle</button></a>
                <ul>
                    <li>Hareket için w-a-s-d tuşlarını kullanın.</li>
                    <li>Güç hapı alındığında hayaletler korkacak ve yenilebilir hale gelecekler.</li>
                    <li>Hayaletlere dokunmadan tüm hapları kapın ve oyunu kazanın!</li>
                </ul>
                <button id="backBtn" onclick="hideHTPModal(), showMenuModal()">Ana Menü</button>
            </div>
        </div>

        <!-- Grafik arayüz için kullanılan modal; 'oyun kaybedildi' modali -->
        <div class="menu-modal game-over-modal">
            <div class="game-over-bg">
                <h2>Oyunu kaybettin!</h2>
                <button onclick="startGame(),hideGameOverModal()">Tekrar oyna</button>
            </div>
        </div>

        <!-- Grafik arayüz için kullanılan modal; 'oyun kazanıldı' modali -->
        <div class="menu-modal win-modal">
            <div class="win-bg">
                <h2>Tebrikler! <br> Oyunu kazandın!</h2>
                <button onclick="startGame(),hideWinModal()">Tekrar oyna</button>
            </div>
        </div>

        <!-- Canvas ve skor -->
        <div class="game-canvas">
            <p><span>Skor: </span><span id="score">0</span></p>
            <canvas></canvas>
        </div>

    </div>

    <!-- Mobil cihaz ve tabletlerle (dokunmatik olaylarla) uyumlu olmadığı için oyuna erişim engelleniyor. -->
    <div id="mobileDeviceModal">
        <h1 class="warning">Oyun sadece bilgisayardan oynanmayı desteklemektedir. Lütfen bilgisayar kullanınız.</h1>
    </div>

    <!-- Uyumsuz cihaz için erişim engellemesi (JS kısmı) -->
    <script>
        const mobileDeviceModal = document.querySelector('#mobileDeviceModal');
        const desktopDeviceModal = document.querySelector('#desktopDeviceModal');

        // Mobil veya tablet cihazın algılanması
        function isMobile() {
            const userAgent = navigator.userAgent.toLowerCase();
            const mobileKeywords = ['android', 'iphone', 'ipad', 'windows phone', 'blackberry', 'nokia', 'opera mini', 'iemobile', 'kindle', 'silk'];

            for (let keyword of mobileKeywords) {
                if (userAgent.includes(keyword)) {
                    return true;
                }
            }
            return false;
        }

        if (isMobile()) {
            mobileDeviceModal.style.display = 'flex';
            desktopDeviceModal.style.display = 'none';
        }
    </script>
</body>

</html>